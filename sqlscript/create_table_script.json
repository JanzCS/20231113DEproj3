{
	"name": "create_table_script",
	"properties": {
		"content": {
			"query": "CREATE SCHEMA Prod\nGO\n\nDROP TABLE Prod.DimAgency;\nDROP TABLE Prod.DimCongressionalDistrict;\nDROP TABLE Prod.DimHighlyCompensatedOfficer;\nDROP TABLE Prod.DimCountry;\nDROP TABLE Prod.DimRecipient;\nDROP TABLE Prod.DimState;\nDROP TABLE Prod.DimCounty;\nDROP TABLE Prod.DimTime;\nDROP TABLE Prod.FactTransaction;\nDROP TABLE Prod.FactAssistance;\n\nCREATE TABLE Prod.DimAgency(\n    agency_code VARCHAR(8000),\n    agency_name VARCHAR(8000)\n);\n\n-- CREATE TABLE DimDisasterEmergencyFund (\n--     disaster_emergency_fund_code VARCHAR(8000) PRIMARY KEY,\n--     code_name VARCHAR(8000) NOT NULL\n-- )\n\n-- CREATE TABLE DimObjectClass (\n--     object_class_code BIGINT PRIMARY KEY,\n--     object_class_name VARCHAR(8000) NOT NULL\n-- )\n\nCREATE TABLE Prod.DimCongressionalDistrict(\n    cd_original VARCHAR(8000),\n    cd_code BIGINT,--VARCHAR(8000),\n    party_2018 VARCHAR(8000),\n    party_2020 VARCHAR(8000),\n    party_2022 VARCHAR(8000)\n);\n\nCREATE TABLE Prod.DimHighlyCompensatedOfficer(\n    hco_name VARCHAR(8000),\n    hco_code BIGINT\n);\n\nCREATE TABLE Prod.DimCountry(\n    country_code VARCHAR(8000),\n    country_name VARCHAR(8000)\n);\n\nCREATE TABLE Prod.DimRecipient(\n    recipient_uei VARCHAR(8000),\n    recipient_name_raw VARCHAR(8000)\n);\n\nCREATE TABLE Prod.DimState (\n    --state_fips VARCHAR(8000) PRIMARY KEY, -- DF does not have this column\n    state_abbreviation VARCHAR(8000),\n    state_name VARCHAR(8000)\n);\n\nCREATE TABLE Prod.DimCounty(\n    county_fips VARCHAR(250),\n    less_than_hs_17_21 INT,\n    hs_only_17_21 INT,\n    some_college_17_21 INT,\n    bach_or_higher_17_21 INT,\n    perc_less_than_hs_17_21 FLOAT(53),\n    perc_hs_only_17_21 FLOAT(53),\n    perc_some_college_17_21 FLOAT(53),\n    perc_bach_or_higher_17_21 FLOAT(53),\n    stname VARCHAR(250),\n    ctyname VARCHAR(250),\n    gdp_2019 VARCHAR(250), -- need to change gold layer data type (there are commas)\n    gdp_2020 VARCHAR(250), -- need to change gold layer data type (there are commas)\n    gdp_2021 VARCHAR(250), -- need to change gold layer data type (there are commas)\n    gdp_2022 VARCHAR(250), -- need to change gold layer data type (there are commas)\n    popestimate2019 INT,\n    popestimate2020 INT,\n    popestimate2021 INT,\n    popestimate2022 INT,\n    party_2016 VARCHAR(250),\n    party_2020 VARCHAR(250)\n);\n\nCREATE TABLE Prod.DimTime(\n    date_key INT,\n    calendar_date DATE,\n    calendar_year INT,\n    calendar_month VARCHAR(15),\n    month_of_year INT,\n    calendar_day VARCHAR(15),\n    day_of_week INT,\n    is_weekday VARCHAR(12),\n    day_of_month INT,\n    last_day_of_month VARCHAR(12),\n    week_of_year_iso INT,\n    quarter_of_year INT,\n    fiscal_year INT,\n    fiscal_month INT\n);\n\n-- Write Office Table\n-- Write Cfda Table\n-- Write Primary Place of Performance\n\nCREATE TABLE Prod.FactAssistance(\n    transaction_unique_key VARCHAR(8000),\n    award_unique_key VARCHAR(8000),\n    cfda_number VARCHAR(8000),\n    face_value_of_loan DECIMAL(18,2),\n    total_face_value_of_loan DECIMAL(18,2),\n    original_loan_subsidy_cost DECIMAL(18,2),\n    total_loan_subsidy_cost DECIMAL(18,2),\n    primary_place_of_performance_scope_code BIGINT--VARCHAR(8000)\n);\n\nCREATE TABLE Prod.FactTransaction(\n    transaction_unique_key VARCHAR(8000),\n    total_outlayed_amount_for_overall_award DECIMAL(18,2),\n    prime_award_transaction_place_of_performance_county_fips_code VARCHAR(8000),\n    highly_compensated_officer_4_amount DECIMAL(18,2),\n    outlayed_amount_from_COVID_19_supplementals_for_overall_award VARCHAR(8000), --DECIMAL(18,2), -- DF has this as a String\n    modification_number VARCHAR(8000), -- Consider Removal\n    funding_office_code VARCHAR(8000),\n    prime_award_transaction_place_of_performance_state_fips_code VARCHAR(8000),\n    award_type VARCHAR(8000),\n    recipient_uei VARCHAR(8000),\n    awarding_agency_code VARCHAR(8000),\n    primary_place_of_performance_country_code VARCHAR(8000),\n    funding_agency_code VARCHAR(8000),\n    action_type_code VARCHAR(8000),\n    highly_compensated_officer_2_amount DECIMAL(18,2),\n    recipient_parent_uei VARCHAR(8000), -- Consider Removal\n    highly_compensated_officer_1_amount DECIMAL(18,2),\n    highly_compensated_officer_3_amount DECIMAL(18,2),\n    recipient_state_code VARCHAR(8000),\n    program_activities_funding_this_award VARCHAR(8000),\n    award_unique_key VARCHAR(8000),\n    prime_award_transaction_place_of_performance_cd_original VARCHAR(8000),\n    recipient_city_name VARCHAR(8000), -- consider moving to recipient table\n    prime_award_transaction_recipient_cd_current VARCHAR(8000),\n    total_obligated_amount DECIMAL(18,2),\n    highly_compensated_officer_5_amount DECIMAL(18,2),\n    obligated_amount_from_COVID_19_supplementals_for_overall_award VARCHAR(8000), --DECIMAL(18,2), -- DF has this as a String\n    recipient_country_code VARCHAR(8000),\n    prime_award_transaction_recipient_county_fips_code VARCHAR(8000),\n    awarding_office_code VARCHAR(8000),\n    recipient_parent_name_raw VARCHAR(8000), -- Consider Removal\n    prime_award_transaction_recipient_state_fips_code VARCHAR(8000),\n    federal_action_obligation DECIMAL(18,2),\n    action_date_key INT,\n    last_modified_key INT,\n    recipient_cd_code BIGINT,\n    place_of_performance_cd_code BIGINT,\n    highly_compensated_officer_1_code BIGINT,\n    highly_compensated_officer_2_code BIGINT,\n    highly_compensated_officer_3_code BIGINT,\n    highly_compensated_officer_4_code BIGINT,\n    highly_compensated_officer_5_code BIGINT\n    -- funding_sub_agency_code VARCHAR(8000) NOT NULL,\n    -- object_class_code INT,\n    -- disaster_emergency_fund_codes_for_overall_award VARCHAR(8000),\n    -- primary_place_of_performance_zip_4 VARCHAR(8000),\n    -- primary_place_of_performance_city_name VARCHAR(8000),\n    -- prime_award_transaction_place_of_performance_cd_current VARCHAR(8000),\n    -- funding_sub_agency_name VARCHAR(8000),\n    -- awarding_sub_agency_name VARCHAR(8000),\n    -- awarding_sub_agency_code VARCHAR(8000),\n    -- last_modified_date VARCHAR(8000) NOT NULL,\n);\n\nCREATE TABLE Prod.DimBusiness\n(\n    business_size_key INT,\n    business_size_code CHAR(1) NOT NULL,\n    business_size VARCHAR(50)\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n);\n\nCREATE TABLE Prod.DimNAICS\n(\n    naics_key INT,\n    naics_code VARCHAR(500),\n    naics_description VARCHAR(500)\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n);\n\nCREATE TABLE Prod.DimCountryOfOrigin\n(\n    country_of_origin_key INT,\n    country_of_origin_code VARCHAR(500),\n    country_of_origin VARCHAR(500)\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n);\n\nCREATE TABLE Prod.FactContract\n(\n    transaction_unique_key VARCHAR(250) NOT NULL,\n    award_unique_key VARCHAR(250),\n    naics_key INT,\n    country_of_origin_key INT,\n    business_size_key INT\n   \n)\nWITH\n(\n    DISTRIBUTION = HASH(transaction_unique_key),\n    CLUSTERED COLUMNSTORE INDEX\n);\n\nCREATE TABLE Prod.DimCFDA\n(\n    cfda_number VARCHAR(150) NOT NULL,\n    cfda_title VARCHAR(500)\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n);\n\nCREATE TABLE Prod.DimOffice\n(\n    office_code VARCHAR(100),\n    office_name VARCHAR(200)\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n);\n\nCREATE TABLE Prod.DimprimaryPlaceOfPerformanceScope\n(\n    primary_place_of_performance_scope VARCHAR(100),\n    primary_place_of_performance_scope_code BIGINT\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n);\n\n\n\n\n\n\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "Project3DW",
				"poolName": "Project3DW"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}